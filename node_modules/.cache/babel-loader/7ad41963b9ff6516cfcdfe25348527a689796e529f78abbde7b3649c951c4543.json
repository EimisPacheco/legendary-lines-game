{"ast":null,"code":"import OpenAI from 'openai';\nconst openai = new OpenAI({\n  apiKey: process.env.REACT_APP_OPENAI_API_KEY\n});\nconst DIFFICULTY_MODIFIERS = {\n  EASY: {\n    description: \"well-known and popular quotes from the last 30 years\",\n    popularity: \"highly popular\",\n    maxRetries: 3,\n    temperature: 0.5\n  },\n  MEDIUM: {\n    description: \"moderately known quotes from the last 50 years\",\n    popularity: \"moderately known\",\n    maxRetries: 3,\n    temperature: 0.7\n  },\n  HARD: {\n    description: \"obscure or historical quotes from any time period\",\n    popularity: \"less known\",\n    maxRetries: 3,\n    temperature: 0.9\n  }\n};\nconst sleep = ms => new Promise(resolve => setTimeout(resolve, ms));\nconst retryWithExponentialBackoff = async function (operation) {\n  let maxRetries = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n  let baseDelay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  let lastError;\n  for (let attempt = 0; attempt < maxRetries; attempt++) {\n    try {\n      return await operation();\n    } catch (error) {\n      var _error$response, _error$response2;\n      lastError = error;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 429 || ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 503) {\n        const delay = baseDelay * Math.pow(2, attempt);\n        console.log(\"Attempt \".concat(attempt + 1, \" failed, retrying in \").concat(delay, \"ms...\"));\n        await sleep(delay);\n        continue;\n      }\n      throw error;\n    }\n  }\n  throw lastError;\n};\nconst ERROR_TYPES = {\n  API_KEY: 'API_KEY_ERROR',\n  RATE_LIMIT: 'RATE_LIMIT_ERROR',\n  NETWORK: 'NETWORK_ERROR',\n  VALIDATION: 'VALIDATION_ERROR',\n  UNKNOWN: 'UNKNOWN_ERROR'\n};\nconst classifyError = error => {\n  var _error$response3;\n  if (error.message.includes('API key')) {\n    return ERROR_TYPES.API_KEY;\n  }\n  if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 429) {\n    return ERROR_TYPES.RATE_LIMIT;\n  }\n  if (error.message.includes('network')) {\n    return ERROR_TYPES.NETWORK;\n  }\n  if (error.message.includes('Invalid API response')) {\n    return ERROR_TYPES.VALIDATION;\n  }\n  return ERROR_TYPES.UNKNOWN;\n};\nconst handleAPIError = async function (error) {\n  let retryCount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  const errorType = classifyError(error);\n  const maxRetries = 3;\n  switch (errorType) {\n    case ERROR_TYPES.RATE_LIMIT:\n      if (retryCount < maxRetries) {\n        const delay = Math.pow(2, retryCount) * 1000;\n        await sleep(delay);\n        return {\n          shouldRetry: true,\n          delay\n        };\n      }\n      throw new Error('Rate limit exceeded. Please try again later.');\n    case ERROR_TYPES.NETWORK:\n      if (retryCount < maxRetries) {\n        const delay = 1000 * (retryCount + 1);\n        await sleep(delay);\n        return {\n          shouldRetry: true,\n          delay\n        };\n      }\n      throw new Error('Network connection issues. Please check your connection.');\n    case ERROR_TYPES.API_KEY:\n      throw new Error('Invalid API configuration. Please contact support.');\n    case ERROR_TYPES.VALIDATION:\n      if (retryCount < 1) {\n        return {\n          shouldRetry: true,\n          delay: 0\n        };\n      }\n      throw new Error('Unable to generate valid content. Please try a different category.');\n    default:\n      throw new Error('An unexpected error occurred. Please try again.');\n  }\n};\nexport const getPhrase = async function (category) {\n  let difficulty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'MEDIUM';\n  const difficultyConfig = DIFFICULTY_MODIFIERS[difficulty];\n  const operation = async () => {\n    try {\n      const systemPrompt = \"You are a game master for 'Legendary Lines'. \\n        Generate \".concat(difficultyConfig.popularity, \" content for the \").concat(category, \" category.\\n        Focus on \").concat(difficultyConfig.description, \".\");\n      const prompt = \"Generate a \".concat(difficulty.toLowerCase(), \" difficulty \").concat(category.toLowerCase(), \" quote or phrase.\\n        The response must be in this exact JSON format:\\n        {\\n          \\\"phrase\\\": \\\"the actual quote or phrase\\\",\\n          \\\"source\\\": \\\"where it's from\\\",\\n          \\\"year\\\": YYYY,\\n          \\\"hint\\\": \\\"a subtle hint without giving away the answer\\\",\\n          \\\"difficulty\\\": \\\"\").concat(difficulty, \"\\\",\\n          \\\"category\\\": \\\"\").concat(category, \"\\\"\\n        }\");\n      const completion = await openai.chat.completions.create({\n        messages: [{\n          role: \"system\",\n          content: systemPrompt\n        }, {\n          role: \"user\",\n          content: prompt\n        }],\n        model: \"gpt-4\",\n        temperature: difficultyConfig.temperature\n      });\n      const response = JSON.parse(completion.choices[0].message.content);\n\n      // Validate response format\n      const requiredFields = ['phrase', 'source', 'year', 'hint', 'difficulty', 'category'];\n      for (const field of requiredFields) {\n        if (!response[field]) {\n          throw new Error(\"Invalid API response: missing \".concat(field));\n        }\n      }\n      return response;\n    } catch (error) {\n      if (error.message.includes('Invalid API response')) {\n        throw new Error('Failed to generate valid phrase. Please try again.');\n      }\n      throw error;\n    }\n  };\n  return retryWithExponentialBackoff(operation, difficultyConfig.maxRetries);\n};\nexport const checkAnswer = async (userAnswer, correctAnswer, category) => {\n  const operation = async () => {\n    try {\n      const systemPrompt = \"You are an answer validator for the 'Legendary Lines' game.\";\n      const prompt = \"Compare these answers for a \".concat(category, \" quote:\\n        User's answer: \\\"\").concat(userAnswer, \"\\\"\\n        Correct answer: \\\"\").concat(correctAnswer.source, \"\\\"\\n        Difficulty level: \").concat(correctAnswer.difficulty, \"\\n        \\n        Consider variations in naming and common abbreviations.\\n        For harder difficulty levels, be more lenient with partial matches.\\n        Return a JSON response in this format:\\n        {\\n          \\\"isCorrect\\\": boolean,\\n          \\\"explanation\\\": \\\"brief explanation of why it's correct or incorrect\\\",\\n          \\\"similarity\\\": \\\"percentage of similarity\\\",\\n          \\\"partialCredit\\\": \\\"percentage of points to award for close answers (0-100)\\\"\\n        }\");\n      const completion = await openai.chat.completions.create({\n        messages: [{\n          role: \"system\",\n          content: systemPrompt\n        }, {\n          role: \"user\",\n          content: prompt\n        }],\n        model: \"gpt-4\",\n        temperature: 0.1\n      });\n      return JSON.parse(completion.choices[0].message.content);\n    } catch (error) {\n      throw new Error('Failed to validate answer. Please try again.');\n    }\n  };\n  return retryWithExponentialBackoff(operation);\n};","map":{"version":3,"names":["OpenAI","openai","apiKey","process","env","REACT_APP_OPENAI_API_KEY","DIFFICULTY_MODIFIERS","EASY","description","popularity","maxRetries","temperature","MEDIUM","HARD","sleep","ms","Promise","resolve","setTimeout","retryWithExponentialBackoff","operation","arguments","length","undefined","baseDelay","lastError","attempt","error","_error$response","_error$response2","response","status","delay","Math","pow","console","log","concat","ERROR_TYPES","API_KEY","RATE_LIMIT","NETWORK","VALIDATION","UNKNOWN","classifyError","_error$response3","message","includes","handleAPIError","retryCount","errorType","shouldRetry","Error","getPhrase","category","difficulty","difficultyConfig","systemPrompt","prompt","toLowerCase","completion","chat","completions","create","messages","role","content","model","JSON","parse","choices","requiredFields","field","checkAnswer","userAnswer","correctAnswer","source"],"sources":["/Users/eimis/test-server/react_projects/cloud-architecture-game/src/services/aiService.js"],"sourcesContent":["import OpenAI from 'openai';\n\nconst openai = new OpenAI({\n  apiKey: process.env.REACT_APP_OPENAI_API_KEY,\n});\n\nconst DIFFICULTY_MODIFIERS = {\n  EASY: {\n    description: \"well-known and popular quotes from the last 30 years\",\n    popularity: \"highly popular\",\n    maxRetries: 3,\n    temperature: 0.5\n  },\n  MEDIUM: {\n    description: \"moderately known quotes from the last 50 years\",\n    popularity: \"moderately known\",\n    maxRetries: 3,\n    temperature: 0.7\n  },\n  HARD: {\n    description: \"obscure or historical quotes from any time period\",\n    popularity: \"less known\",\n    maxRetries: 3,\n    temperature: 0.9\n  }\n};\n\nconst sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n\nconst retryWithExponentialBackoff = async (operation, maxRetries = 3, baseDelay = 1000) => {\n  let lastError;\n  \n  for (let attempt = 0; attempt < maxRetries; attempt++) {\n    try {\n      return await operation();\n    } catch (error) {\n      lastError = error;\n      \n      if (error.response?.status === 429 || error.response?.status === 503) {\n        const delay = baseDelay * Math.pow(2, attempt);\n        console.log(`Attempt ${attempt + 1} failed, retrying in ${delay}ms...`);\n        await sleep(delay);\n        continue;\n      }\n      \n      throw error;\n    }\n  }\n  \n  throw lastError;\n};\n\nconst ERROR_TYPES = {\n  API_KEY: 'API_KEY_ERROR',\n  RATE_LIMIT: 'RATE_LIMIT_ERROR',\n  NETWORK: 'NETWORK_ERROR',\n  VALIDATION: 'VALIDATION_ERROR',\n  UNKNOWN: 'UNKNOWN_ERROR'\n};\n\nconst classifyError = (error) => {\n  if (error.message.includes('API key')) {\n    return ERROR_TYPES.API_KEY;\n  }\n  if (error.response?.status === 429) {\n    return ERROR_TYPES.RATE_LIMIT;\n  }\n  if (error.message.includes('network')) {\n    return ERROR_TYPES.NETWORK;\n  }\n  if (error.message.includes('Invalid API response')) {\n    return ERROR_TYPES.VALIDATION;\n  }\n  return ERROR_TYPES.UNKNOWN;\n};\n\nconst handleAPIError = async (error, retryCount = 0) => {\n  const errorType = classifyError(error);\n  const maxRetries = 3;\n  \n  switch (errorType) {\n    case ERROR_TYPES.RATE_LIMIT:\n      if (retryCount < maxRetries) {\n        const delay = Math.pow(2, retryCount) * 1000;\n        await sleep(delay);\n        return { shouldRetry: true, delay };\n      }\n      throw new Error('Rate limit exceeded. Please try again later.');\n      \n    case ERROR_TYPES.NETWORK:\n      if (retryCount < maxRetries) {\n        const delay = 1000 * (retryCount + 1);\n        await sleep(delay);\n        return { shouldRetry: true, delay };\n      }\n      throw new Error('Network connection issues. Please check your connection.');\n      \n    case ERROR_TYPES.API_KEY:\n      throw new Error('Invalid API configuration. Please contact support.');\n      \n    case ERROR_TYPES.VALIDATION:\n      if (retryCount < 1) {\n        return { shouldRetry: true, delay: 0 };\n      }\n      throw new Error('Unable to generate valid content. Please try a different category.');\n      \n    default:\n      throw new Error('An unexpected error occurred. Please try again.');\n  }\n};\n\nexport const getPhrase = async (category, difficulty = 'MEDIUM') => {\n  const difficultyConfig = DIFFICULTY_MODIFIERS[difficulty];\n  \n  const operation = async () => {\n    try {\n      const systemPrompt = `You are a game master for 'Legendary Lines'. \n        Generate ${difficultyConfig.popularity} content for the ${category} category.\n        Focus on ${difficultyConfig.description}.`;\n      \n      const prompt = `Generate a ${difficulty.toLowerCase()} difficulty ${category.toLowerCase()} quote or phrase.\n        The response must be in this exact JSON format:\n        {\n          \"phrase\": \"the actual quote or phrase\",\n          \"source\": \"where it's from\",\n          \"year\": YYYY,\n          \"hint\": \"a subtle hint without giving away the answer\",\n          \"difficulty\": \"${difficulty}\",\n          \"category\": \"${category}\"\n        }`;\n\n      const completion = await openai.chat.completions.create({\n        messages: [\n          { role: \"system\", content: systemPrompt },\n          { role: \"user\", content: prompt }\n        ],\n        model: \"gpt-4\",\n        temperature: difficultyConfig.temperature,\n      });\n\n      const response = JSON.parse(completion.choices[0].message.content);\n      \n      // Validate response format\n      const requiredFields = ['phrase', 'source', 'year', 'hint', 'difficulty', 'category'];\n      for (const field of requiredFields) {\n        if (!response[field]) {\n          throw new Error(`Invalid API response: missing ${field}`);\n        }\n      }\n\n      return response;\n    } catch (error) {\n      if (error.message.includes('Invalid API response')) {\n        throw new Error('Failed to generate valid phrase. Please try again.');\n      }\n      throw error;\n    }\n  };\n\n  return retryWithExponentialBackoff(\n    operation,\n    difficultyConfig.maxRetries\n  );\n};\n\nexport const checkAnswer = async (userAnswer, correctAnswer, category) => {\n  const operation = async () => {\n    try {\n      const systemPrompt = `You are an answer validator for the 'Legendary Lines' game.`;\n      \n      const prompt = `Compare these answers for a ${category} quote:\n        User's answer: \"${userAnswer}\"\n        Correct answer: \"${correctAnswer.source}\"\n        Difficulty level: ${correctAnswer.difficulty}\n        \n        Consider variations in naming and common abbreviations.\n        For harder difficulty levels, be more lenient with partial matches.\n        Return a JSON response in this format:\n        {\n          \"isCorrect\": boolean,\n          \"explanation\": \"brief explanation of why it's correct or incorrect\",\n          \"similarity\": \"percentage of similarity\",\n          \"partialCredit\": \"percentage of points to award for close answers (0-100)\"\n        }`;\n\n      const completion = await openai.chat.completions.create({\n        messages: [\n          { role: \"system\", content: systemPrompt },\n          { role: \"user\", content: prompt }\n        ],\n        model: \"gpt-4\",\n        temperature: 0.1,\n      });\n\n      return JSON.parse(completion.choices[0].message.content);\n    } catch (error) {\n      throw new Error('Failed to validate answer. Please try again.');\n    }\n  };\n\n  return retryWithExponentialBackoff(operation);\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}